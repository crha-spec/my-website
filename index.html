<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kişisel Müzik Kütüphanesi</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1e2a78 0%, #712b75 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 30px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo h1 {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(45deg, #ff8a00, #e52e71);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .logo i {
            font-size: 32px;
            color: #e52e71;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .sidebar {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .nav-item:hover, .nav-item.active {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .music-player {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            padding: 20px;
        }
        
        .now-playing {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .album-art {
            width: 200px;
            height: 200px;
            border-radius: 10px;
            margin: 0 auto 20px;
            background: linear-gradient(45deg, #1e2a78, #712b75);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            color: rgba(255, 255, 255, 0.5);
        }
        
        .song-info {
            margin-bottom: 20px;
        }
        
        .song-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .song-artist {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 20px;
        }
        
        .progress-container {
            background: rgba(255, 255, 255, 0.2);
            height: 5px;
            border-radius: 5px;
            margin-bottom: 10px;
            cursor: pointer;
        }
        
        .progress {
            background: #e52e71;
            height: 100%;
            border-radius: 5px;
            width: 0%;
        }
        
        .time {
            display: flex;
            justify-content: space-between;
            color: rgba(255, 255, 255, 0.7);
            font-size: 12px;
            margin-bottom: 20px;
        }

        .volume-control {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
        }

        .volume-control i {
            color: rgba(255, 255, 255, 0.7);
            font-size: 16px;
            cursor: pointer;
        }

        #volumeSlider {
            width: 100px;
            height: 5px;
            -webkit-appearance: none;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            outline: none;
        }

        #volumeSlider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: #e52e71;
            cursor: pointer;
        }

        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
        }
        
        .control-btn {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .play-pause {
            background: #e52e71;
            width: 60px;
            height: 60px;
            font-size: 24px;
        }
        
        .control-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .song-list {
            margin-top: 30px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .song-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            background: rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .song-item:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .song-item.active {
            background: rgba(229, 46, 113, 0.3);
        }
        
        .song-number {
            width: 30px;
            text-align: center;
            margin-right: 15px;
            font-weight: bold;
            color: #e52e71;
        }
        
        .song-details {
            flex: 1;
        }
        
        .song-item-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .song-item-artist {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .song-duration {
            padding: 0 10px;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .add-song-form {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            backdrop-filter: blur(10px);
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .add-btn {
            background: #e52e71;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            width: 100%;
        }
        
        .upload-guide {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            backdrop-filter: blur(10px);
        }
        
        .guide-steps {
            margin-top: 15px;
        }
        
        .guide-steps li {
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        .guide-link {
            color: #e52e71;
            text-decoration: none;
            font-weight: bold;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }

        .empty-list {
            text-align: center;
            padding: 30px;
            color: rgba(255, 255, 255, 0.7);
        }
.song-actions {
    display: flex;
    gap: 5px;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.song-item:hover .song-actions {
    opacity: 1;
}

.edit-btn, .delete-btn {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: white;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

.edit-btn:hover {
    background: rgba(76, 175, 80, 0.3);
}

.delete-btn:hover {
    background: rgba(244, 67, 54, 0.3);
}        
        .song-lyrics {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    padding: 15px;
    margin-top: 20px;
    font-size: 14px;
    line-height: 1.6;
}

.song-lyrics h4 {
    margin-bottom: 10px;
    color: #e52e71;
}

#lyricsText {
    white-space: pre-line;
}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-music"></i>
                <h1>Kişisel Müzik Kütüphanesi</h1>
            </div>
        </header>
        
        <div class="main-content">
            <div class="sidebar">
                <div class="nav-item active" data-section="player">
                    <i class="fas fa-play-circle"></i>
                    <span>Çalıcı</span>
                </div>
                <div class="nav-item" data-section="my-songs">
                    <i class="fas fa-music"></i>
                    <span>Şarkılarım</span>
                </div>
                <div class="nav-item" data-section="add-song">
                    <i class="fas fa-plus-circle"></i>
                    <span>Şarkı Ekle</span>
                </div>
                <div class="nav-item" data-section="guide">
                    <i class="fas fa-info-circle"></i>
                    <span>Yükleme Kılavuzu</span>
                </div>
            </div>
            
            <div class="music-player">
                <!-- Çalıcı Bölümü -->
                <div id="player" class="section active">
                    <h2>Şimdi Oynatılıyor</h2>
                    
                    <div class="now-playing">
                        <div class="album-art">
                            <i class="fas fa-music"></i>
                        </div>
                        <div class="song-info">
                            <div class="song-title">Şarkı seçin</div>
                            <div class="song-artist">Şarkıcı</div>
                        </div>
                        
                        <div class="progress-container">
                            <div class="progress"></div>
                        </div>
                        <div class="time">
                            <span>0:00</span>
                            <span>0:00</span>
                        </div>

                        <div class="volume-control">
                            <i class="fas fa-volume-down"></i>
                            <input type="range" id="volumeSlider" min="0" max="100" value="100">
                            <i class="fas fa-volume-up"></i>
                        </div>

        <div class="controls">
            <button class="control-btn" id="prevBtn">
                <i class="fas fa-step-backward"></i>
            </button>
            <button class="control-btn play-pause" id="playPauseBtn">
                <i class="fas fa-play"></i>
            </button>
            <button class="control-btn" id="nextBtn">
                <i class="fas fa-step-forward"></i>
            </button>
        </div>
    </div>
    
    <div class="song-lyrics" id="songLyricsContainer" style="margin-top: 20px; max-height: 150px; overflow-y: auto; display: none;">
        <h4>Şarkı Sözleri</h4>
        <p id="lyricsText"></p>
    </div>
</div>

<!-- Düzenleme Modal Penceresi -->
<div id="editModal" class="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000;">
    <div class="modal-content" style="background: #2a2a5a; margin: 10% auto; padding: 20px; border-radius: 10px; width: 80%; max-width: 500px;">
        <h2>Şarkıyı Düzenle</h2>
        <div class="form-group">
            <label for="editSongTitle">Şarkı Adı</label>
            <input type="text" id="editSongTitle" placeholder="Şarkı adını girin">
        </div>
        <div class="form-group">
            <label for="editSongArtist">Sanatçı</label>
            <input type="text" id="editSongArtist" placeholder="Sanatçı adını girin">
        </div>
        <div class="form-group">
            <label for="editSongUrl">Catbox.moe Direct Link</label>
            <input type="text" id="editSongUrl" placeholder="Catbox.moe direct linkini yapıştırın">
        </div>
        <div class="form-group">
            <label for="editSongLyrics">Şarkı Sözleri (Opsiyonel)</label>
            <textarea id="editSongLyrics" rows="4" placeholder="Şarkı sözlerini girin (isteğe bağlı)"></textarea>
        </div>
        <div style="display: flex; gap: 10px;">
            <button class="add-btn" id="saveEditBtn">Kaydet</button>
            <button class="add-btn" style="background: #f44336;" id="cancelEditBtn">İptal</button>
        </div>
    </div>
</div>
<!-- Şarkılarım Bölümü -->
                <div id="my-songs" class="section">
                    <h2>Şarkı Kütüphanem</h2>
                    <div class="song-list" id="songList">
                        <div class="empty-list" id="emptyList">
                            <i class="fas fa-music" style="font-size: 48px; margin-bottom: 15px;"></i>
                            <p>Henüz hiç şarkınız yok.</p>
                            <p>Şarkı Ekle bölümünden yeni şarkılar ekleyin!</p>
                        </div>
                    </div>
                </div>
                
                <!-- Şarkı Ekle Bölümü -->
                <div id="add-song" class="section">
                    <h2>Yeni Şarkı Ekle</h2>
                    <div class="add-song-form">
                        <div class="form-group">
                            <label for="songTitle">Şarkı Adı</label>
                            <input type="text" id="songTitle" placeholder="Şarkı adını girin">
                        </div>
                        <div class="form-group">
                            <label for="songArtist">Sanatçı</label>
                            <input type="text" id="songArtist" placeholder="Sanatçı adını girin">
                        </div>
                        <div class="form-group">
                            <label for="songUrl">Catbox.moe Direct Link</label>
                            <input type="text" id="songUrl" placeholder="Catbox.moe direct linkini yapıştırın">
                        </div>
                        <div class="form-group">
    <label for="songLyrics">Şarkı Sözleri (Opsiyonel)</label>
    <textarea id="songLyrics" rows="4" placeholder="Şarkı sözlerini girin (isteğe bağlı)"></textarea>
</div>
                        <button class="add-btn" id="addSongBtn">Şarkıyı Ekle</button>
                        <button class="add-btn" id="generateLinkBtn" style="background: #4CAF50; margin-top: 10px;">
    <i class="fas fa-external-link-alt"></i> Bağlantı Oluştur
</button>
                    </div>
                </div>
                
                <!-- Yükleme Kılavuzu Bölümü -->
                <div id="guide" class="section">
                    <h2>Şarkı Yükleme Kılavuzu</h2>
                    <div class="upload-guide">
                        <p>Şarkılarınızı ekleyebilmek için önce catbox.moe sitesine yüklemelisiniz.</p>
                        
                        <ol class="guide-steps">
                            <li><a href="https://catbox.moe/" target="_blank" class="guide-link">Catbox.moe</a> sitesine gidin</li>
                            <li>Dosya seç butonuna tıklayarak müzik dosyanızı seçin</li>
                            <li>"Upload" butonuna tıklayarak dosyayı yükleyin</li>
                            <li>Yükleme tamamlandığında "Direct Link"i kopyalayın</li>
                            <li>Uygulamada "Şarkı Ekle" bölümüne gelip bilgileri doldurun</li>
                            <li>Direct linki ilgili alana yapıştırın ve "Şarkıyı Ekle" butonuna tıklayın</li>
                        </ol>
                        
                        <p style="margin-top: 15px; font-style: italic;">
                            Artık şarkınız kütüphanenize eklendi! İstediğiniz zaman dinleyebilirsiniz.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        
        <footer style="text-align: center; padding: 20px; margin-top: 30px; border-top: 1px solid rgba(255, 255, 255, 0.2); color: rgba(255, 255, 255, 0.7);">
            <p>© 2023 Kişisel Müzik Kütüphanesi - Kendi müzik koleksiyonunuzu oluşturun</p>
        </footer>
    </div>

    <audio id="audioPlayer"></audio>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Navigasyon işlevselliği
            const navItems = document.querySelectorAll('.nav-item');
            const sections = document.querySelectorAll('.section');
            
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const targetSection = this.getAttribute('data-section');
                    
                    // Tüm nav itemları ve sectionları deaktif et
                    navItems.forEach(navItem => navItem.classList.remove('active'));
                    sections.forEach(section => section.classList.remove('active'));
                    
                    // Tıklananı aktif et
                    this.classList.add('active');
                    document.getElementById(targetSection).classList.add('active');
                });
            });
            
            // Müzik çalar değişkenleri
            let currentSong = null;
            let isPlaying = false;
            let userSongs = JSON.parse(localStorage.getItem('userSongs')) || [];
            const audioPlayerElement = document.getElementById('audioPlayer');
            const playPauseBtn = document.getElementById('playPauseBtn');
            const playIcon = playPauseBtn.querySelector('i');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const volumeSlider = document.getElementById('volumeSlider');
            const songListElement = document.getElementById('songList');
            const emptyListElement = document.getElementById('emptyList');
            
            // Sayfa yüklendiğinde şarkı listesini oluştur
            renderSongList();
            
            // Ses kontrolü
            volumeSlider.addEventListener('input', function() {
                audioPlayerElement.volume = this.value / 100;
            });
            
            // Şarkı ekleme butonu
            document.getElementById('addSongBtn').addEventListener('click', function() {
                const title = document.getElementById('songTitle').value.trim();
                const artist = document.getElementById('songArtist').value.trim();
                const url = document.getElementById('songUrl').value.trim();
                const lyrics = document.getElementById('songLyrics').value.trim();
                
                if (!title || !artist || !url) {
                    alert('Lütfen tüm alanları doldurun!');
                    return;
                }
                
                if (!url.includes('catbox.moe')) {
                    alert('Lütfen geçerli bir catbox.moe linki girin!');
                    return;
                }
                
                // Yeni şarkıyı ekle
                const newSong = {
                    id: Date.now(), // Benzersiz ID
                    title: title,
                    artist: artist,
                    url: url,
                    lyrics: lyrics,
                    duration: "0:00"
                };
                
                userSongs.push(newSong);
                localStorage.setItem('userSongs', JSON.stringify(userSongs));
                
                // Formu temizle
                document.getElementById('songTitle').value = '';
                document.getElementById('songArtist').value = '';
                document.getElementById('songUrl').value = '';
                document.getElementById('songLyrics').value = '';
                
                // Listeyi yeniden oluştur
                renderSongList();
                
                alert('Şarkı başarıyla eklendi!');
            });
            
// Bağlantı oluştur butonu
document.getElementById('generateLinkBtn').addEventListener('click', function() {
    // Catbox.moe'yi yeni sekmede aç
    window.open('https://catbox.moe/', '_blank');
    
    // Sayfa yeniden odaklandığında panoyu kontrol et
    window.addEventListener('focus', function checkClipboard() {
        // Bir kere kontrol ettikten sonra event listener'ı kaldır
        window.removeEventListener('focus', checkClipboard);
        
        // Panodaki metni al ve URL alanına yapıştır
        navigator.clipboard.readText()
            .then(text => {
                if (text.includes('catbox.moe')) {
                    document.getElementById('songUrl').value = text;
                }
            })
            .catch(err => {
                console.error('Panoya erişilemedi: ', err);
            });
    });
});            
            
            
// Düzenleme ve silme işlevleri
function setupSongActions() {
    // Düzenleme butonları
    document.querySelectorAll('.edit-btn').forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.stopPropagation();
            const songId = parseInt(this.getAttribute('data-id'));
            const song = userSongs.find(s => s.id === songId);
            if (song) {
                openEditModal(song);
            }
        });
    });
    
    // Silme butonları
    document.querySelectorAll('.delete-btn').forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.stopPropagation();
            const songId = parseInt(this.getAttribute('data-id'));
            if (confirm('Bu şarkıyı silmek istediğinize emin misiniz?')) {
                deleteSong(songId);
            }
        });
    });
}

// Düzenleme modalını aç
function openEditModal(song) {
    document.getElementById('editSongTitle').value = song.title;
    document.getElementById('editSongArtist').value = song.artist;
    document.getElementById('editSongUrl').value = song.url;
    document.getElementById('editSongLyrics').value = song.lyrics || '';
    
    document.getElementById('editModal').style.display = 'block';
    
    // Kaydet butonuna tıklama
    document.getElementById('saveEditBtn').onclick = function() {
        saveSongEdit(song.id);
    };
    
    // İptal butonuna tıklama
    document.getElementById('cancelEditBtn').onclick = function() {
        document.getElementById('editModal').style.display = 'none';
    };
}

// Şarkı düzenlemelerini kaydet
function saveSongEdit(songId) {
    const title = document.getElementById('editSongTitle').value.trim();
    const artist = document.getElementById('editSongArtist').value.trim();
    const url = document.getElementById('editSongUrl').value.trim();
    const lyrics = document.getElementById('editSongLyrics').value.trim();
    
    if (!title || !artist || !url) {
        alert('Lütfen tüm alanları doldurun!');
        return;
    }
    
    if (!url.includes('catbox.moe')) {
        alert('Lütfen geçerli bir catbox.moe linki girin!');
        return;
    }
    
    // Şarkıyı güncelle
    const songIndex = userSongs.findIndex(s => s.id === songId);
    if (songIndex !== -1) {
        userSongs[songIndex] = {
            ...userSongs[songIndex],
            title,
            artist,
            url,
            lyrics
        };
        
        localStorage.setItem('userSongs', JSON.stringify(userSongs));
        renderSongList();
        
        // Eğer bu şarkı çalınıyorsa, bilgileri güncelle
        if (currentSong && currentSong.id === songId) {
            currentSong = userSongs[songIndex];
            document.querySelector('.song-title').textContent = currentSong.title;
            document.querySelector('.song-artist').textContent = currentSong.artist;
            
            const lyricsContainer = document.getElementById('songLyricsContainer');
            const lyricsText = document.getElementById('lyricsText');
            
            if (currentSong.lyrics) {
                lyricsText.textContent = currentSong.lyrics;
                lyricsContainer.style.display = 'block';
            } else {
                lyricsContainer.style.display = 'none';
            }
        }
        
        document.getElementById('editModal').style.display = 'none';
        alert('Şarkı başarıyla güncellendi!');
    }
}

// Şarkı sil
function deleteSong(songId) {
    userSongs = userSongs.filter(song => song.id !== songId);
    localStorage.setItem('userSongs', JSON.stringify(userSongs));
    
    // Eğer silinen şarkı çalınıyorsa, durdur
    if (currentSong && currentSong.id === songId) {
        audioPlayerElement.pause();
        currentSong = null;
        isPlaying = false;
        updatePlayPauseIcon();
        
        document.querySelector('.song-title').textContent = 'Şarkı seçin';
        document.querySelector('.song-artist').textContent = 'Şarkıcı';
        document.querySelector('.progress').style.width = '0%';
        document.querySelector('.time span:first-child').textContent = '0:00';
        document.getElementById('songLyricsContainer').style.display = 'none';
    }
    
    renderSongList();
}
            
            // Şarkı listesini oluştur
            function renderSongList() {
                if (userSongs.length === 0) {
                    emptyListElement.style.display = 'block';
                    songListElement.innerHTML = '';
                    songListElement.appendChild(emptyListElement);
                    return;
                }
                
                emptyListElement.style.display = 'none';
                songListElement.innerHTML = '';
                
                userSongs.forEach((song, index) => {
                    const songItem = document.createElement('div');
                    songItem.classList.add('song-item');
                    songItem.setAttribute('data-id', song.id);
                    
                    songItem.innerHTML = `
    <div class="song-number">${index + 1}</div>
    <div class="song-details">
        <div class="song-item-title">${song.title}</div>
        <div class="song-item-artist">${song.artist}</div>
    </div>
    <div class="song-duration">${song.duration}</div>
    <div class="control-btn"><i class="fas fa-play"></i></div>
    <div class="song-actions">
        <button class="edit-btn" data-id="${song.id}"><i class="fas fa-edit"></i></button>
        <button class="delete-btn" data-id="${song.id}"><i class="fas fa-trash"></i></button>
    </div>
`;
                    
                    songItem.addEventListener('click', function() {
                        playSong(song);
                    });
                    
                    songListElement.appendChild(songItem);                    
           setupSongActions();
                });
            }
            
            // Şarkı çalma fonksiyonu
            function playSong(song) {
                currentSong = song;
                audioPlayerElement.src = song.url;
                audioPlayerElement.play()
                    .then(() => {
                        isPlaying = true;
                        updatePlayPauseIcon();
                        
                        // Şu an çalanı güncelle
                        document.querySelector('.song-title').textContent = song.title;
                        document.querySelector('.song-artist').textContent = song.artist;

// Şarkı sözlerini göster veya gizle
const lyricsContainer = document.getElementById('songLyricsContainer');
const lyricsText = document.getElementById('lyricsText');

if (song.lyrics) {
    lyricsText.textContent = song.lyrics;
    lyricsContainer.style.display = 'block';
} else {
    lyricsContainer.style.display = 'none';
}
                        // İlerleme çubuğu güncellemesi için
                        audioPlayerElement.addEventListener('timeupdate', updateProgressBar);
                        audioPlayerElement.addEventListener('ended', playNextSong);
                    })
                    .catch(error => {
                        console.error("Şarkı çalınamadı:", error);
                        alert("Şarkı çalınamadı. Lütfen linkin doğru olduğundan emin olun.");
                    });
            }
            
            // Çal/Duraklat butonu
            playPauseBtn.addEventListener('click', function() {
                if (!currentSong && userSongs.length > 0) {
                    // İlk şarkıyı çal
                    playSong(userSongs[0]);
                } else if (currentSong) {
                    // Şarkı çalınıyorsa duraklat, duraklatılmışsa devam ettir
                    togglePlayPause();
                }
            });
            
            // Çal/Duraklat fonksiyonu
            function togglePlayPause() {
                if (isPlaying) {
                    audioPlayerElement.pause();
                } else {
                    audioPlayerElement.play();
                }
                isPlaying = !isPlaying;
                updatePlayPauseIcon();
            }
            
            // Çal/Duraklat ikonunu güncelleme
            function updatePlayPauseIcon() {
                if (isPlaying) {
                    playIcon.classList.remove('fa-play');
                    playIcon.classList.add('fa-pause');
                } else {
                    playIcon.classList.remove('fa-pause');
                    playIcon.classList.add('fa-play');
                }
            }
            
            // İlerleme çubuğunu güncelleme
            function updateProgressBar() {
                const progress = document.querySelector('.progress');
                const currentTimeElement = document.querySelector('.time span:first-child');
                const durationElement = document.querySelector('.time span:last-child');
                
                // İlerleme yüzdesini hesapla
                const percent = (audioPlayerElement.currentTime / audioPlayerElement.duration) * 100;
                progress.style.width = percent + '%';
                
                // Zamanı güncelle
                currentTimeElement.textContent = formatTime(audioPlayerElement.currentTime);
                if (!isNaN(audioPlayerElement.duration)) {
                    durationElement.textContent = formatTime(audioPlayerElement.duration);
                }
            }
            
            // Zaman formatı
            function formatTime(seconds) {
                if (isNaN(seconds)) return "0:00";
                
                const min = Math.floor(seconds / 60);
                const sec = Math.floor(seconds % 60);
                return min + ':' + (sec < 10 ? '0' + sec : sec);
            }
            
            // Sonraki şarkıyı çal
            function playNextSong() {
                if (!currentSong || userSongs.length <= 1) return;
                
                const currentIndex = userSongs.findIndex(song => song.id === currentSong.id);
                const nextIndex = (currentIndex + 1) % userSongs.length;
                playSong(userSongs[nextIndex]);
            }
            
            // Önceki şarkıyı çal
            function playPreviousSong() {
                if (!currentSong || userSongs.length <= 1) return;
                
                const currentIndex = userSongs.findIndex(song => song.id === currentSong.id);
                const prevIndex = (currentIndex - 1 + userSongs.length) % userSongs.length;
                playSong(userSongs[prevIndex]);
            }
            
            // İlerleme çubuğu tıklama
            const progressContainer = document.querySelector('.progress-container');
            progressContainer.addEventListener('click', function(e) {
                if (!currentSong) return;
                
                const width = this.clientWidth;
                const clickX = e.offsetX;
                const duration = audioPlayerElement.duration;
                
                audioPlayerElement.currentTime = (clickX / width) * duration;
            });
            
            // Buton eventleri
            prevBtn.addEventListener('click', playPreviousSong);
            nextBtn.addEventListener('click', playNextSong);
        });
    </script>
</body>
</html>
